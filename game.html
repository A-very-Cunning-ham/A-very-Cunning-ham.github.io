<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="arrays.js"></script>
<style>

#timerParent{

}

#timer{
  /* border-style: solid;
  border-width: 1px;
  border-color: black; */
  position: relative;
  border-radius: 2px;
  height:10px;
  width:200px;
  left:800px;
  margin-top: 25px;
  margin-bottom: 25px;
  margin-right: 25px;
  margin-left: 25px;
  background:green
}

p.buttonText{
  font:20px arial, sans-serif;
  text-align:center;
  color:black;
}
.button{
  display: inline-block;
  border-radius: 25px;
  height:100px;
  width:100px;
  left:50px;
  margin-top: 25px;
  margin-bottom: 25px;
  margin-right: 25px;
  margin-left: 25px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.center {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;

  /* background: white;
  border: 1px solid black; */
}

</style>

<script>

var time = 10; //in seconds

var count = 0;
var score = 0;
var questionArray = ["a question","another question"]
var answerArray = [["answer1", "answer2", "answer3", "answer4"],]
var correctAnswers = ["correct answer"]

var s = "psychological disorder\tdeviant, distressful, and dysfunctional patterns of thoughts, feelings, or behaviors.\r\nAttention-Deficit Hyperactivity Disorder (ADHD)\ta psychological disorder marked by the appearance by age 7 of one or more of three key symptoms extreme inattention, hyperactivity, and impulsivity.\r\nmedical model\tthe concept that diseases, in this case psychological disorders, have physical causes that can be diagnosed, treated, and, in most cases, cured, often through treatment in a hospital.\r\nDSM-V\tthe American Psychiatric Association\'s Diagnostic and Statistical Manual of Mental Disorders, a widely used system for classifying psychological disorders"



function stringTo2dArray(string, d1, d2) {
	return string.split(d1).map(function(x){return x.split(d2)});
}

var res = stringTo2dArray(s, "\r\n", "\t");
  var categs = JSON.parse(sessionStorage.categs)

    
 function joinCategs (categs) {
     let array = [];
     let i = 0;
     for (i=0;i < categs.length; i++) {
         if (categs[i]) {
             array = array.concat(units[i]);
         }
     }
     return array;
 }
var currentCategs = joinCategs(categs);
    

function randomQA (array, n) {
    let x = array[(generateRandom(0, array.length-1, n[0]))]
    if (checkDupes (x, n) === true) {
        return randomQA(array, n);
    } else {
        return x
    }
}

function checkDupes (a, as) {
    for (i=0;i<=as.length; i++) {
        if (a === as[i]) {
            return true;
        }
    }
}
    
var doneQuestions = [-1];
function nextQuestion(){
  if (doneQuestions.length-1 === currentCategs.length) {
      $("#currentQuestion").html("All questions used");
      return 0;
  }
  currentQuestion = randomQA(currentCategs, doneQuestions);
  let exc = [currentQuestion]; //Temp array of excluded values
  let a1 = randomQA(currentCategs, exc);
  exc = [currentQuestion, a1];
  let a2 = randomQA(currentCategs, exc);
  exc = [currentQuestion, a1, a2];
  let a3 = randomQA(currentCategs, exc);

  answers = [currentQuestion[0],a1[0],a2[0],a3[0]];

  answers = shuffle(answers);
  $("#currentQuestion").html(currentQuestion[1]);
  $("#answer1").html(answers[0]);
  $("#answer2").html(answers[1]);
  $("#answer3").html(answers[2]);
  $("#answer4").html(answers[3]);
  doneQuestions.push(currentQuestion);
}
    
    
    
    
    
    

$(document).ready(function(){
    // $("button").click(function(){
    //     var div = $("div.button");
    //     div.animate({height: '150px', opacity: '1'}, "500");
    //     div.animate({width: '150px', opacity: '1'}, "500");
    //     div.animate({height: '100px', opacity: '1'}, "500");
    //     div.animate({width: '100px', opacity: '1'}, "500");
    // });

    $("#a").click(function(){
        $("div.button").hide();
    });

    // $(".button").click(function(){
    //     $(this).html("<p class=buttonText>YOU CLICKED ME</p>");
    // });
    $("#startButton").click(function(){
      nextQuestion();
      startTimer();
    });
    $(document).on("keypress", function (e) {
        if (e.which === 113) {

        }
        if (e.which === 119) {
            console.log("answer2");
        }
        if (e.which === 101) {
            console.log("answer3");
        }
        if (e.which === 114) {
            console.log("answer4")
        }
    });

    $("#buttonA").click(function(){
        checkAnswer(answers[0], this);
    });
    $("#buttonB").click(function(){
        checkAnswer(answers[1], this);
    });
    $("#buttonC").click(function(){
        checkAnswer(answers[2], this);
    });
    $("#buttonD").click(function(){
        checkAnswer(answers[3], this);
    });


});

function startTimer(){
    $("#timer").animate({width:'0px'}, time*1000, function(){
      resetBoard();
    });

}



function shuffle(array) {
    var i = array.length,
        j = 0,
        temp;

    while (i--) {
        j = Math.floor(Math.random() * (i+1));
        temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
    return array;
}

function generateRandom(min, max, i) {
    var num = Math.floor(Math.random() * (max - min + 1)) + min;
    return (num === i[0]) ? generateRandom(min, max, i) : num;
}

function checkAnswer(ans, id){
  console.log(ans);
  console.log(currentQuestion[0]);

  // console.log(id);
    if(ans === currentQuestion[0]){
    incrementScore(id);
    // return true;
  }else{
    $(id).html("<p class=buttonText>Incorrect</p>");
    // return false;
  }
}

function incrementScore(id){
      $(id).html("<p class=buttonText>Correct</p>");
      score++;
      $("#score").html("Score: "+score);
}

function resetBoard(){
  $("#timer").removeAttr('style');;
}




// function assignAnswers (count, cat) {
//     let n = Math.floor(Math.random() * 4); //Returns a random number between 0 and 3
//     if (n === 0) {
//         document.getElementById('answer_a').innerHTML = cat[count][0];
//     } else {
//         document.getElementById('answer_a').innerHTML = cat[Math.floor(Math.random() * cat.length)][0];
//     }
//     if (n === 1) {
//         document.getElementById('answer_b').innerHTML = cat[count][0];
//     } else {
//         document.getElementById('answer_b').innerHTML = cat[Math.floor(Math.random() * cat.length)][0];
//     }
//     if (n === 2) {
//         document.getElementById('answer_c').innerHTML = cat[count][0];
//     } else {
//         document.getElementById('answer_c').innerHTML = cat[Math.floor(Math.random() * cat.length)][0];
//     }
//     if (n === 3) {
//         document.getElementById('answer_d').innerHTML = cat[count][0];
//     } else {
//         document.getElementById('answer_d').innerHTML = cat[Math.floor(Math.random() * cat.length)][0];
//     }
// }



</script>
</head>
<body style="background-color:#D5C5C8;">

<h1 align="center" ><a href="index.html">PsychBattle</a></h1>

<h3 align="center" id="score" >Score:</h1>

<div class="center">
<button id="startButton">Start Game</button>
</div>


<div class="center">
<h3 id="currentQuestion">Click Start to Begin</h3>
</div>

<div class="center">
<ol type="A">
  <li id="answer1">Answer</li>
  <li id="answer2">Answer</li>
  <li id="answer3">Answer</li>
  <li id="answer4">Answer</li>
</ol>
</div>

<div id="timerParent">
  <div id="timer"></div>
</div>

<div class="center">

<div class=button id="buttonA" style="background:#75B9BE;"><p class=buttonText>A</p></div>
<div class=button id="buttonB" style="background:#8BBF9F;"><p class=buttonText>B</p></div>
<div class=button id="buttonC" style="background:#DB7F8E;"><p class=buttonText>C</p></div>
<div class=button id="buttonD" style="background:#FFFD98;"><p class=buttonText>D</p></div>


</div>

</body>
</html>
